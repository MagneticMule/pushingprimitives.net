jQuery(document).ready(function(e){function t(){e(".widget_multi_input").each(function(){var t=e(this),i=t.find(".widget_multi_value_field").val();if(i.length>0){var n=i.split("|");t.find(".widget_multi_fields").empty();t.parents(".widget_multi_input");e.each(n,function(e,i){t.find(".widget_multi_fields").append('<div class="set"><input type="text" value="'+i+'" class="widget_multi_single_field" /><span class="widget_multi_remove_field"><span class="dashicons dashicons-no-alt"></span></span></div>')})}})}function i(t){var i="";t.find(".widget_multi_fields .widget_multi_single_field").each(function(){i+=e(this).val()+"|"}),t.find(".widget_multi_value_field").val(i.slice(0,-1)).change()}function n(){e(".content-type").on("change",function(){var t=e(this),i=t.parent().parent(),n=i.find(".block"),l=i.find("."+t.val());n.removeClass("block").addClass("none"),l.removeClass("none").addClass("block")})}function l(){e(".fabulist-widget-chosen-select").chosen({width:"100%"})}e(document).on("click",".widget_multi_add_field",function(t){var n=e(t.currentTarget);t.preventDefault();var l=n.parents(".widget_multi_input");l.find(".widget_multi_fields").append('<div class="set"><input type="text" value="" class="widget_multi_single_field" /><span class="widget_multi_remove_field"><span class="dashicons dashicons-no-alt"></span></span></div>'),i(l)}).on("change",".widget_multi_single_field",function(){i(e(this).parents(".widget_multi_input"))}).on("click",".widget_multi_remove_field",function(t){t.preventDefault();var n=e(this),l=n.parents(".widget_multi_input");n.parent().remove(),i(l)}),t(),e(document).on("click",".fabulist-accordion",function(t){t.preventDefault(),e(this).next(".fabulist-panel").slideToggle()}),e(document).on("click",".upload_image_button",function(t){t.preventDefault();var i=e(this),n=wp.media.frames.file_frame=wp.media({title:"Select or upload image",library:{type:"image"},button:{text:"Select"},multiple:!1});n.on("select",function(){var e=n.state().get("selection").first().toJSON();i.prev("input").val(e.url)}),n.open()}),n(),l(),e(document).on("widget-updated widget-added",function(){l(),n(),t()})});